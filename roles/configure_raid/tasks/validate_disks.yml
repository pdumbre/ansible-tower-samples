
- name: Validate storage controllers
  fail:
    msg: "Expected at least 2 storage controllers, found {{ m2_storage.json.StorageControllers | length }}"
  when: storage_controllers.json.StorageControllers | length < 2

- name: Fail if fewer than 2 controllers
  fail:
    msg: "Expected at least 2 storage controllers, found {{ m2_storage.json.StorageControllers | length }}"
  when: storage_controllers.json.StorageControllers | length < 2

- name: Print controller summary
  debug:
    msg: "Number of storage controllers: {{ storage_controllers.json.StorageControllers | length }}"

- name: Controller check completed
  debug:
    msg: "Storage controller verification successful"
